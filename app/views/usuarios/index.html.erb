<% provide(:titulo, 'Usuarios') %>
<div class="page-header">
	<h1>Usuarios <small><%= @comunidad.nombre %></small></h1>	
</div>
	
<div class="container-fluid">
	
	<div class="row">
		<div class="span6">
			<p>ORDENAR POR</p>
			<ul class="nav nav-pills">
			  <li class="active">
			    <a href="#">Email</a>
			  </li>
			  <li><a href="#">Nombre</a></li>
			  <li><a href="#">Administrador</a></li>
			</ul>
		</div>
		<div class="span2 offset1">
			<h2><%= @comunidad.usuarios.count %><br /><small>Usuarios</small></h2>
		</div>
		<div class="span2">
			<h2><%= @comunidad.usuarios.where(administrador: true).count %><br /><small>Administradores</small></h2>
		</div>		
	</div>
	
	<div class="row">
		<%= will_paginate %>
		<table class="table table-bordered table-striped">
			<tr>
				<th>Email</th>
				<th>Nombre</th>
				<th>Admin?</th>
				<th></th>
			</tr>
		<% @usuarios.each do |usuario| %>
			<tr>
				<td><%= link_to usuario.email, usuario %></td>
				<td><%= usuario.nombre %></td>
				<% if usuario.administrador?  %>
					<td><i class="icon-ok"></i></td>
				<% else %>
					<td></td>
				<% end %>
				<td class="ar">
					<small>
					<%= link_to 'Mostrar', usuario %> |
					<%= link_to 'Editar', edit_usuario_path(usuario) %> |
					<%= link_to 'Eliminar', usuario, confirm: 'Estas seguro de eliminar?', :method => :delete %>
					</small>
				</td>	
			</tr>
		<% end %>
		</table>
		<%= will_paginate %>
	</div>
	
	<div class="row">
		<%= link_to 'Nuevo usuario', new_comunidad_usuario_path(@comunidad), :class => 'btn btn-primary btn-large' %>
	</div>	
</div>
